
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>PNoptimset</title><meta name="generator" content="MATLAB 7.13"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2012-07-16"><meta name="DC.source" content="PNoptimset.m"><style type="text/css">

body {
  background-color: white;
  margin:10px;
}

h1 {
  color: #990000; 
  font-size: x-large;
}

h2 {
  color: #990000;
  font-size: medium;
}

/* Make the text shrink to fit narrow windows, but not stretch too far in 
wide windows. */ 
p,h1,h2,div.content div {
  max-width: 600px;
  /* Hack for IE6 */
  width: auto !important; width: 600px;
}

pre.codeinput {
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #A020F0}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

  </style></head><body><div class="content"><pre class="codeinput"><span class="keyword">function</span> options = PNoptimset(varargin)
<span class="comment">% PNoptimset : Set options for PNopt</span>
<span class="comment">%</span>
<span class="comment">% options = PNoptimset('param1',val1,'param2',val2,...) creates an options</span>
<span class="comment">%   structure in which the named parameters have the specified values. Default</span>
<span class="comment">%   values are used for parameters that are not specified.</span>
<span class="comment">%</span>
<span class="comment">% PNoptimset with no input arguments and no output arguments displays all</span>
<span class="comment">%   parameter names and their possible values.</span>
<span class="comment">%</span>
<span class="comment">%   $PNoptimset.m $</span>

<span class="comment">%</span>
  <span class="comment">% Print out possible values of options.</span>
  <span class="keyword">if</span> nargin == 0 &amp;&amp; nargout == 0
    fprintf(<span class="string">'Default parameters for PNopt:\n'</span>);
    fprintf(<span class="string">'     checkOpt : [          logical |      1 ] \n'</span>);
    fprintf(<span class="string">'    curvParam : [  positive scalar |    0.9 ] \n'</span>);
    fprintf(<span class="string">'        debug : [          logical |      0 ] \n'</span>);
    fprintf(<span class="string">'    descParam : [  positive scalar | 0.0001 ] \n'</span>);
    fprintf(<span class="string">'      display : [ positive integer |     10 ] \n'</span>);
    fprintf(<span class="string">'   LbfgsCorrs : [ positive integer |     50 ] \n'</span>);
    fprintf(<span class="string">'lineSearchMem : [ positive integer |     10 ] \n'</span>);
    fprintf(<span class="string">'  maxfunEvals : [ positive integer |   5000 ] \n'</span>);
    fprintf(<span class="string">'      maxIter : [ positive integer |    500 ] \n'</span>);
    fprintf(<span class="string">'       method : [           string |  Lbfgs ] \n'</span>);
    fprintf(<span class="string">'    subMethod : [           string |  Tfocs ] \n'</span>);
    fprintf(<span class="string">'       funTol : [  positive scalar |   1e-9 ] \n'</span>);
    fprintf(<span class="string">'       optTol : [  positive scalar |   1e-6 ] \n'</span>);
    fprintf(<span class="string">'         xtol : [  positive scalar |   1e-9 ] \n'</span>);
    fprintf(<span class="string">'\n'</span>);
    <span class="keyword">return</span>;
  <span class="keyword">end</span>

  Names = [
    <span class="string">'checkOpt      '</span>
    <span class="string">'curvParam     '</span>
    <span class="string">'debug         '</span>
    <span class="string">'descParam     '</span>
    <span class="string">'display       '</span>
    <span class="string">'LbfgsCorrs    '</span>
    <span class="string">'lineSearchMem '</span>
    <span class="string">'maxfunEvals   '</span>
    <span class="string">'maxIter       '</span>
    <span class="string">'method        '</span>
    <span class="string">'SparsaOptions '</span>
    <span class="string">'subMethod     '</span>
    <span class="string">'TfocsOpts     '</span>
    <span class="string">'funTol        '</span>
    <span class="string">'optTol        '</span>
    <span class="string">'xtol          '</span>
    <span class="string">'useMex        '</span>
    ];

  [m,n] = size(Names); <span class="comment">%#ok&lt;NASGU&gt;</span>
  names = lower(Names);

  <span class="comment">% Combine all leading options structures o1, o2, ... in l1Set(o1,o2,...).</span>
  options = [];
  <span class="keyword">for</span> j = 1:m
    eval([<span class="string">'options.'</span> Names(j,:) <span class="string">'= [];'</span>]);
  <span class="keyword">end</span>
  i = 1;
  <span class="keyword">while</span> i &lt;= nargin
    arg = varargin{i};
    <span class="keyword">if</span> ischar(arg), <span class="keyword">break</span>; <span class="keyword">end</span>
    <span class="keyword">if</span> ~isempty(arg)                      <span class="comment">% [] is a valid options argument</span>
      <span class="keyword">if</span> ~isa(arg,<span class="string">'struct'</span>)
        error(sprintf([<span class="string">'Expected argument %d to be a string parameter name '</span> <span class="keyword">...</span>
          <span class="string">'or an options structure\ncreated with SetPNoptOptions.'</span>], i)); <span class="comment">%#ok&lt;SPERR&gt;</span>
      <span class="keyword">end</span>
      <span class="keyword">for</span> j = 1:m
        <span class="keyword">if</span> any(strcmp(fieldnames(arg),deblank(Names(j,:))))
          eval([<span class="string">'val = arg.'</span> Names(j,:) <span class="string">';'</span>]);
        <span class="keyword">else</span>
          val = [];
        <span class="keyword">end</span>
        <span class="keyword">if</span> ~isempty(val)
          eval([<span class="string">'options.'</span> Names(j,:) <span class="string">'= val;'</span>]);
        <span class="keyword">end</span>
      <span class="keyword">end</span>
    <span class="keyword">end</span>
    i = i + 1;
  <span class="keyword">end</span>

  <span class="comment">% A finite state machine to parse name-value pairs.</span>
  <span class="keyword">if</span> rem(nargin-i+1,2) ~= 0
    error(<span class="string">'Arguments must occur in name-value pairs.'</span>);
  <span class="keyword">end</span>
  expectval = 0;                          <span class="comment">% start expecting a name, not a value</span>
  <span class="keyword">while</span> i &lt;= nargin
    arg = varargin{i};

    <span class="keyword">if</span> ~expectval
      <span class="keyword">if</span> ~ischar(arg)
         error(sprintf(<span class="string">'Expected argument %d to be a string parameter name.'</span>, i));
      <span class="keyword">end</span>

      lowArg = lower(arg);
      j = strmatch(lowArg,names);
      <span class="keyword">if</span> isempty(j)                       <span class="comment">% if no matches</span>
        error(sprintf(<span class="string">'Unrecognized parameter name ''%s''.'</span>, arg));
      <span class="keyword">elseif</span> length(j) &gt; 1                <span class="comment">% if more than one match</span>
        <span class="comment">% Check for any exact matches (in case any names are subsets of others)</span>
        k = strmatch(lowArg,names,<span class="string">'exact'</span>);
        <span class="keyword">if</span> length(k) == 1
          j = k;
        <span class="keyword">else</span>
          msg = sprintf(<span class="string">'Ambiguous parameter name ''%s'' '</span>, arg);
          msg = [msg <span class="string">'('</span> deblank(Names(j(1),:))];
          <span class="keyword">for</span> k = j(2:length(j))'
            msg = [msg <span class="string">', '</span> deblank(Names(k,:))];
          <span class="keyword">end</span>
          msg = sprintf(<span class="string">'%s).'</span>, msg);
          error(msg);
        <span class="keyword">end</span>
      <span class="keyword">end</span>
      expectval = 1;                      <span class="comment">% we expect a value next</span>

    <span class="keyword">else</span>
      eval([<span class="string">'options.'</span> Names(j,:) <span class="string">'= arg;'</span>]);
      expectval = 0;

    <span class="keyword">end</span>
    i = i + 1;
  <span class="keyword">end</span>

  <span class="keyword">if</span> expectval
    error(sprintf(<span class="string">'Expected value for parameter ''%s''.'</span>, arg));
  <span class="keyword">end</span>
</pre><pre class="codeoutput">Default parameters for PNopt:
     checkOpt : [          logical |      1 ] 
    curvParam : [  positive scalar |    0.9 ] 
        debug : [          logical |      0 ] 
    descParam : [  positive scalar | 0.0001 ] 
      display : [ positive integer |     10 ] 
   LbfgsCorrs : [ positive integer |     50 ] 
lineSearchMem : [ positive integer |     10 ] 
  maxfunEvals : [ positive integer |   5000 ] 
      maxIter : [ positive integer |    500 ] 
       method : [           string |  Lbfgs ] 
    subMethod : [           string |  Tfocs ] 
       funTol : [  positive scalar |   1e-9 ] 
       optTol : [  positive scalar |   1e-6 ] 
         xtol : [  positive scalar |   1e-9 ] 

</pre><p class="footer"><br>
      Published with MATLAB&reg; 7.13<br></p></div><!--
##### SOURCE BEGIN #####
function options = PNoptimset(varargin)
% PNoptimset : Set options for PNopt
%
% options = PNoptimset('param1',val1,'param2',val2,...) creates an options
%   structure in which the named parameters have the specified values. Default
%   values are used for parameters that are not specified.
%   
% PNoptimset with no input arguments and no output arguments displays all 
%   parameter names and their possible values.
%
%   $PNoptimset.m $
%   $Revision: 0.4.2 $  $Date: 2012/07/15 $
% 
  % Print out possible values of options.
  if nargin == 0 && nargout == 0
    fprintf('Default parameters for PNopt:\n');
    fprintf('     checkOpt : [          logical |      1 ] \n');
    fprintf('    curvParam : [  positive scalar |    0.9 ] \n');    
    fprintf('        debug : [          logical |      0 ] \n');
    fprintf('    descParam : [  positive scalar | 0.0001 ] \n');
    fprintf('      display : [ positive integer |     10 ] \n');
    fprintf('   LbfgsCorrs : [ positive integer |     50 ] \n');
    fprintf('lineSearchMem : [ positive integer |     10 ] \n');
    fprintf('  maxfunEvals : [ positive integer |   5000 ] \n');
    fprintf('      maxIter : [ positive integer |    500 ] \n');
    fprintf('       method : [           string |  Lbfgs ] \n');
    fprintf('    subMethod : [           string |  Tfocs ] \n');
    fprintf('       funTol : [  positive scalar |   1e-9 ] \n');
    fprintf('       optTol : [  positive scalar |   1e-6 ] \n');
    fprintf('         xtol : [  positive scalar |   1e-9 ] \n');
    fprintf('\n');
    return;
  end

  Names = [
    'checkOpt      '
    'curvParam     '
    'debug         '
    'descParam     '
    'display       '
    'LbfgsCorrs    '
    'lineSearchMem '
    'maxfunEvals   '
    'maxIter       '
    'method        '
    'SparsaOptions '
    'subMethod     '
    'TfocsOpts     '
    'funTol        '
    'optTol        '
    'xtol          '
    'useMex        '
    ];
  
  [m,n] = size(Names); %#ok<NASGU>
  names = lower(Names);

  % Combine all leading options structures o1, o2, ... in l1Set(o1,o2,...).
  options = [];
  for j = 1:m
    eval(['options.' Names(j,:) '= [];']);
  end
  i = 1;
  while i <= nargin
    arg = varargin{i};
    if ischar(arg), break; end
    if ~isempty(arg)                      % [] is a valid options argument
      if ~isa(arg,'struct')
        error(sprintf(['Expected argument %d to be a string parameter name ' ...
          'or an options structure\ncreated with SetPNoptOptions.'], i)); %#ok<SPERR>
      end
      for j = 1:m
        if any(strcmp(fieldnames(arg),deblank(Names(j,:))))
          eval(['val = arg.' Names(j,:) ';']);
        else
          val = [];
        end
        if ~isempty(val)
          eval(['options.' Names(j,:) '= val;']);
        end
      end
    end
    i = i + 1;
  end
  
  % A finite state machine to parse name-value pairs.
  if rem(nargin-i+1,2) ~= 0
    error('Arguments must occur in name-value pairs.');
  end
  expectval = 0;                          % start expecting a name, not a value
  while i <= nargin
    arg = varargin{i};

    if ~expectval
      if ~ischar(arg)
         error(sprintf('Expected argument %d to be a string parameter name.', i));
      end

      lowArg = lower(arg);
      j = strmatch(lowArg,names);
      if isempty(j)                       % if no matches
        error(sprintf('Unrecognized parameter name ''%s''.', arg));
      elseif length(j) > 1                % if more than one match
        % Check for any exact matches (in case any names are subsets of others)
        k = strmatch(lowArg,names,'exact');
        if length(k) == 1
          j = k;
        else
          msg = sprintf('Ambiguous parameter name ''%s'' ', arg);
          msg = [msg '(' deblank(Names(j(1),:))];
          for k = j(2:length(j))'
            msg = [msg ', ' deblank(Names(k,:))];
          end
          msg = sprintf('%s).', msg);
          error(msg);
        end
      end
      expectval = 1;                      % we expect a value next

    else
      eval(['options.' Names(j,:) '= arg;']);
      expectval = 0;
      
    end
    i = i + 1;
  end

  if expectval
    error(sprintf('Expected value for parameter ''%s''.', arg));
  end


##### SOURCE END #####
--></body></html>